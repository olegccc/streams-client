!function(){function a(angular){var a=function(){function a(){}return a.COMMAND_IDS="ids",a.COMMAND_CREATE="create",a.COMMAND_READ="read",a.COMMAND_UPDATE="update",a.COMMAND_DELETE="delete",a.COMMAND_VERSION="version",a.COMMAND_CHANGES="changes",a.CONFIGURATION="streamsConfiguration",a.UPDATE_DELETED=1,a.UPDATE_CREATED=2,a.UPDATE_CHANGED=3,a}(),b=angular.module("streams-client",[]);b.constant(a.CONFIGURATION,{ConnectionPath:"streams"});var c=function(){function b(a,b,c){this.httpService=a,this.qService=b,this.configuration=c}return b.prototype.sendRequest=function(a){return this.httpService.post("/"+this.configuration.ConnectionPath,a)},b.prototype.getIds=function(b,c,d,e){var f={};f.command=a.COMMAND_IDS,f.nodeId=c,f.filter=d,f.options=e,f.streamId=b;var g=this.qService.defer();return this.sendRequest(f).success(function(a){a.ids?g.resolve(a.ids):g.reject()}).error(function(a){g.reject(a)}),g.promise},b.prototype.readRecord=function(a,b){return void 0},b.prototype.updateRecord=function(b,c,d,e){var f={};f.command=a.COMMAND_UPDATE,f.record=d,f.nodeId=c,f.echo=e,f.streamId=b;var g=this.qService.defer();return this.sendRequest(f).success(function(a){a.record?g.resolve(a.record):g.reject()}).error(function(a){g.reject(a)}),g.promise},b.prototype.createRecord=function(b,c,d){var e={};e.command=a.COMMAND_CREATE,e.record=d,e.nodeId=c,e.streamId=b;var f=this.qService.defer();return this.sendRequest(e).success(function(a){a.record?f.resolve(a.record):f.reject()}).error(function(a){f.reject(a)}),f.promise},b.prototype.deleteRecord=function(b,c,d){var e={};e.command=a.COMMAND_DELETE,e.id=d,e.nodeId=c,e.streamId=b;var f=this.qService.defer();return this.sendRequest(e).success(function(){f.resolve()}).error(function(a){f.reject(a)}),f.promise},b.prototype.getVersion=function(b){var c={};c.command=a.COMMAND_VERSION,c.streamId=b;var d=this.qService.defer();return this.sendRequest(c).success(function(a){d.resolve(a.version)}).error(function(a){d.reject(a)}),d.promise},b.prototype.getChanges=function(b,c){var d={};d.command=a.COMMAND_CHANGES,d.version=c,d.streamId=b;var e=this.qService.defer();return this.sendRequest(d).success(function(a){e.resolve(a.changes)}).error(function(a){e.reject(a)}),e.promise},b}();b.service("streamsCommunication",["$http","$q",a.CONFIGURATION,c])}if("function"==typeof define&&define.amd)define(["angular","angular.animate","angular.translate","angular.messages","angular.material","angular.aria","angular.touch"],function(b,c,d,e,f,g,h){a(b)});else if("object"==typeof exports){var b=require("angular");require("angular.animate"),require("angular.translate"),require("angular.messages"),require("angular.material"),require("angular.aria"),require("angular.touch"),module.exports=a(b)}else a(window.angular)}();