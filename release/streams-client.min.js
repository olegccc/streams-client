!function(){function a(angular){var a=function(){function a(){}return a.COMMAND_IDS="ids",a.COMMAND_CREATE="create",a.COMMAND_READ="read",a.COMMAND_UPDATE="update",a.COMMAND_DELETE="delete",a.COMMAND_VERSION="version",a.COMMAND_CHANGES="changes",a.CONFIGURATION="streamsConfiguration",a.UPDATE_DELETED=1,a.UPDATE_CREATED=2,a.UPDATE_CHANGED=3,a}(),b=angular.module("streams-client",[]);b.constant(a.CONFIGURATION,{ConnectionPath:"streams"});var c=function(){function b(a,b,c){this.httpService=a,this.qService=b,this.configuration=c}return b.prototype.sendRequests=function(a){return this.httpService.post("/"+this.configuration.ConnectionPath,a)},b.prototype.getIds=function(b,c,d,e){var f=this;return this.sendRequests([{command:a.COMMAND_IDS,nodeId:c,filter:d,options:e,streamId:b}]).then(function(a){return a.data&&1===a.data.length&&a.data[0].ids?a.data[0].ids:f.qService.reject()})},b.prototype.readRecord=function(b,c,d){var e=this;return this.sendRequests([{command:a.COMMAND_READ,id:d,nodeId:c,streamId:b}]).then(function(a){return a.data&&1===a.data.length?a.data[0].record:e.qService.reject()})},b.prototype.updateRecord=function(b,c,d,e){var f=this;return this.sendRequests([{command:a.COMMAND_UPDATE,record:d,nodeId:c,echo:e,streamId:b}]).then(function(a){return a.data&&1===a.data.length&&a.data[0].record?a.data[0].record:f.qService.reject()})},b.prototype.createRecord=function(b,c,d){var e=this;return this.sendRequests([{command:a.COMMAND_CREATE,record:d,nodeId:c,streamId:b}]).then(function(a){return a.data&&1===a.data.length||a.data[0].record?a.data[0].record:e.qService.reject()})},b.prototype.deleteRecord=function(b,c,d){var e=this;return this.sendRequests([{command:a.COMMAND_DELETE,id:d,nodeId:c,streamId:b}]).then(function(a){return a.data&&1===a.data.length?void 0:e.qService.reject()})},b.prototype.getVersion=function(b){var c=this;return this.sendRequests([{command:a.COMMAND_VERSION,streamId:b}]).then(function(a){return a.data&&1===a.data.length?a.data[0].version:c.qService.reject()})},b.prototype.getOneStreamChanges=function(b,c){var d=this;return this.sendRequests([{command:a.COMMAND_CHANGES,version:c,streamId:b}]).then(function(a){return a.data&&1===a.data.length?a.data[0].changes:d.qService.reject()})},b.prototype.getManyStreamsChanges=function(b){for(var c=this,d=[],e=Object.keys(b),f=0;f<e.length;f++)d.push({command:a.COMMAND_CHANGES,version:b[e[f]],streamId:e[f]});return this.sendRequests(d).then(function(a){if(!a.data)return c.qService.reject();for(var b=[],d=0;d<a.data.length;d++)b.push({streamId:a.data[d].streamId,updates:a.data[d].changes});return b})},b}();b.service("streamsCommunication",["$http","$q",a.CONFIGURATION,c])}if("function"==typeof define&&define.amd)define(["angular","angular.animate","angular.translate","angular.messages","angular.material","angular.aria","angular.touch"],function(b,c,d,e,f,g,h){a(b)});else if("object"==typeof exports){var b=require("angular");require("angular.animate"),require("angular.translate"),require("angular.messages"),require("angular.material"),require("angular.aria"),require("angular.touch"),module.exports=a(b)}else a(window.angular)}();