{
  "selenium_webdriver_file": "selenium-server/selenium-server-standalone-2.48.2.jar",
  "selenium_webdriver_url": "http://selenium-release.storage.googleapis.com/2.48/selenium-server-standalone-2.48.2.jar",
  "run-functional-tests": {
    "path": "build/specs/functional",
    "mask": "*Spec.js",
    "initialize": "initialize"
  },
  "ts": {
    "options": {
      "target": "es3",
      "declaration": false,
      "failOnTypeErrors": true,
      "sourceMap": false,
      "removeComments": false,
      "compiler": "node_modules/typescript/bin/tsc"
    },
    "release": {
      "options": {
        "fast": "never"
      },
      "files": {
        "build/streams-client.js": [
          "typings/tsd.d.ts",
          "src/**/*.ts",
          "!src/specs/**/*.ts"
        ],
        "build/specs.js": [
          "typings/tsd.d.ts",
          "src/specs/**/*.ts",
          "!src/specs/functional/**/*.ts"
        ]
      }
    },
    "debug": {
      "options": {
        "fast": "always",
        "additionalFlags": "\"typings/tsd.d.ts\""
      },
      "outDir": "build",
      "src": [
        "src/**/*.ts"
      ]
    }
  },
  "connect": {
    "options": {
      "port": 9090,
      "base": "."
    },
    "start": {
    },
    "keepalive": {
      "options": {
        "keepalive": true
      }
    },
    "examples": {
      "options": {
        "keepalive": true
      }
    }
  },
  "sync": {
    "javascript": {
      "files": [{
        "cwd": "src",
        "src": ["**/*.js"],
        "dest": "build"
      }]
    }
  },
  "copy": {
    "interfaces": {
      "expand": true,
      "cwd": "src/interfaces",
      "src": "I*.js",
      "dest": "release/interfaces/",
      "filter": "isFile"
    }
  },
  "protractor": {
    "options": {
      "configFile": "./config/protractor.config.js",
      "args": {
        "specs": ["build/specs/functional/**/*Spec.js"],
        "seleniumServerJar": "<%= selenium_webdriver_file %>",
        "framework": "jasmine2",
        "browser": "phantomjs",
        "verbose": true
      }
    },
    "default": {
    }
  },
  "protractor_webdriver": {
    "options": {
    },
    "default": {
    },
    "update": {
      "options": {
        "command": "webdriver-manager update --standalone"
      }
    }
  },
  "uglify": {
    "options": {
      "mangle": {
        "except": [
          "angular"
        ]
      }
    },
    "default": {
      "files": {
        "release/streams-client.min.js": "release/streams-client.js"
      }
    }
  },
  "clean": {
    "build": ["build"],
    "tscache": [".tscache"]
  },
  "wrap-jade": {
    "default": {
      "files": [
        { "src": ["**/*.jade", "!**/_*.jade", "!specs/**/*.jade"], "cwd": "src", "expand": true}
      ],
      "output": "src/templates/templates.ts"
    }
  },
  "wrap-module": {
    "default": {
      "files": [
        { "src": "build/streams-client.js", "dest": "release/streams-client.js" }
      ],
      "modules": {
        "angular": "angular",
        "angular.animate": "",
        "angular.translate": "",
        "angular.messages": "",
        "angular.material": "",
        "angular.aria": "",
        "angular.touch": ""
      }
    }
  },
  "karma": {
    "options": {
      "frameworks": [
        "jasmine"
      ],
      "port": 9876,
      "browsers": [
        "PhantomJS"
      ],
      "singleRun": true
    },
    "debug": {
      "files": [
        { "src": "bower_components/angular/angular.js" },
        { "src": "bower_components/angular-mocks/angular-mocks.js" },
        { "src": "build/interfaces/**/*.js" },
        { "src": "build/templates/**/*.js" },
        { "src": "build/modules/**/*.js" },
        { "src": "build/services/**/*.js" },
        { "src": "build/directives/**/*.js" },
        { "src": "build/controllers/**/*.js" },
        { "src": ["build/specs/**/*.js", "!build/specs/functional/**/*.js"] }
      ]
    },
    "release": {
      "files": [
        { "src": "bower_components/angular/angular.js" },
        { "src": "bower_components/angular-mocks/angular-mocks.js" },
        { "src": "build/streams-client.js" },
        { "src": "build/specs.js" }
      ]
    }
  },
  "watch": {
    "views": {
      "files": [
        "src/**/*.jade"
      ],
      "tasks": [
        "wrap-jade",
        "ts:debug",
        "karma:debug"
      ]
    },
    "specs": {
      "options": {
        "atBegin": true
      },
      "files": [
        "src/**/*.{js,ts}"
      ],
      "tasks": [
        "ts:debug",
        "karma:debug"
      ]
    },
    "functional": {
      "files": [
        "src/specs/functional/**/*.{js,ts}"
      ],
      "tasks": [
        "sync:javascript",
        "functional-tests"
      ]
    }
  }
}
